# lark

## 获取知识空间节点信息

### 请求

| 基本                        |                                                                |
| --------------------------- | -------------------------------------------------------------- |
| HTTP URL                    | https://open.larkoffice.com/open-apis/wiki/v2/spaces/get_node  |
| HTTP Method                 | GET                                                            |
| 接口频率限制 712            | 100 次/分钟                                                    |
| 支持的应用类型              | 自建应用 商店应用                                              |
| 权限要求 ① 开启任一权限即可 | Om 查看知识空间节点信息 OT 查看、编辑和管理知识库 O 查看知识库 |

### 请求头

```json
{
  "Authorization": "Bearer {access_token}",
  "Content-Type": "application/json; charset=utf-8"
}
```

### 查询参数

| 参数名称 | 必须 | 类型   | 描述                                                             |
| -------- | ---- | ------ | ---------------------------------------------------------------- |
| token    | 是   | string | 知识空间节点 token                                               |
| obj_type | 否   | string | 知识空间节点类型，可选值有：doc,docx,sheet,mindnote,bitable,wiki |

### 响应

```json
{
  "code": 0,
  "data": {
    "node": {
      "creator": "ou_2a70be4b672a7248b50f481ea6994b44",
      "has_child": false,
      "node_create_time": "1763390247",
      "node_creator": "ou_2a70be4b672a7248b50f481ea6994b44",
      "node_token": "HyKOw87PHivqfIkIlzXcJu5An1f",
      "node_type": "origin",
      "obj_create_time": "1763390247",
      "obj_edit_time": "1764737700",
      "obj_token": "E4Q5dudHKoHfJBxA7J0liAJEgmb",
      "obj_type": "docx",
      "origin_node_token": "HyKOw87PHivqfIkIlzXcJu5An1f",
      "origin_space_id": "7540300278621290524",
      "owner": "ou_2a70be4b672a7248b50f481ea6994b44",
      "parent_node_token": "",
      "space_id": "7540300278621290524",
      "title": "LIVE C 视角下的竞拍——技术分享"
    }
  },
  "msg": "success"
}
```

- **code** (int)：错误码，非 0 表示失败
- **msg** (string)：错误描述
- **data** (-)：-
- **node** (node)：节点信息
- **space_id** (string)：知识空间 ID。获取方式参考知识库概述。
- **node_token** (string)：知识库节点 token，如果 URL 链接中 token 前为 wiki，该 token 为知识库的节点 token。
- **obj_token** (string)：节点的实际云文档的 token，如果 URL 链接中 token 前为 docx、base、sheets 等非 wiki 类型，则说明该 token 是当前云文档的实际 token。如果要获取或编辑节点内容，需要使用此 token 调用对应的接口。可根据 obj_type 判断属于哪种文档类型。
- **obj_type** (string)：文档类型，对于快捷方式，该字段是对应的实体的 obj_type。  
  可选值：doc（旧版文档）、sheet（表格）、mindnote（思维导图）、bitable（多维表格）、file（文件）
- **parent_node_token** (string)：父节点 token。若当前节点为一级节点，父节点 token 为空。
- **node_type** (string)：节点类型。  
  可选值：origin（实体）、shortcut（快捷方式）
- **origin_node_token** (string)：快捷方式对应的实体 node_token，当节点为快捷方式时，该值不为空。
- **origin_space_id** (string)：快捷方式对应的实体所在的 space id
- **has_child** (boolean)：是否有子节点
- **title** (string)：文档标题
- **obj_create_time** (string)：文档创建时间
- **obj_edit_time** (string)：文档最近编辑时间
- **node_create_time** (string)：节点创建时间
- **creator** (string)：文档创建者
- **owner** (string)：文档所有者
- **node_creator** (string)：节点创建者

## 获取文档纯文本内容

### 请求

- **基本**
- **HTTP URL**  
  https://open.larkoffice.com/open-apis/docx/v1/documents/:document_id/raw_content
- **HTTP Method**  
  GET
- **接口频率限制**  
  特殊频控
- **支持的应用类型**
  - 自建应用
  - 商店应用
- **权限要求**（开启任一权限即可）
  - 创建及编辑新版文档
  - 查看新版文档

### 请求头

```json
{
  "Authorization": "Bearer {access_token}",
  "Content-Type": "application/json; charset=utf-8"
}
```

### 请求参数

document_id

- **必须**: 是
- 注意：
  - 如果链接中包含 docx，则链接中的 token 为 document_id
  - 如果链接中为 wiki，则需要获取知识空间节点信息中拿到 obj_token 作为 document_id

### 响应

- **code**（int）：错误码，非 0 表示失败
- **msg**（string）：错误描述
- **data**（-）：预留数据字段
- **content**（string）：文档纯文本
