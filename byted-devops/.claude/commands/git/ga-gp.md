---
description: 一键完成 add、commit（自动生成信息）与 push 的 Git 工作流
description-hint: "[<类型>(<作用域>): <简短描述>]"
allowed-tools: Bash(*)
---

# ga-gp

`ga-gp` 将“暂存全部改动 → 自动生成符合规范的 commit 信息 → 推送到远程当前分支”封装为一条命令，适合在功能开发/修复完成后快速同步代码。

## 使用方法:

`/ga-gp [<类型>(<作用域>): <简短描述>]`

- `<类型>`：feat|fix|docs|style|refactor|test|chore|perf|ci|build 等
- `<作用域>`：可选，如 api、ui、db
- `<简短描述>`：50 字以内，句尾不加句号，切记，无需带上作者等信息生成相关语句。

若省略参数，脚本会交互式提示用户补全。

## 执行流程:

1. 检查工作区是否干净；若有未跟踪文件也一并纳入
2. `git add -A` 将全部改动加入暂存区
3. 若用户未提供完整 commit 信息，则交互式收集：
   - 类型/作用域/简短描述/详细描述（可选）
4. 按规范格式生成 commit 信息并提交：

<类型>(<作用域>): <简短描述>

<详细描述（可选）>

**注意**：提交信息末尾**不会**追加任何 AI 签名或 Co-Authored-By 行

5. `git push origin <当前分支>`，若远程无对应分支则自动创建
6. 输出结果摘要或错误提示

## 示例:

- `/git:ga-gp feat(auth): 支持手机号一键登录`
- `/git:ga-gp fix(ui): 修复暗色模式下图标颜色异常`
- `/git:ga-gp` （进入交互式补全流程）

## 注意事项:

- 仅操作当前分支，不会切换或合并其他分支
- 若暂存后无实质改动，命令将提前退出并提示
- 自动生成信息时，会截取 diff 摘要写入“详细描述”以供追溯
- 若 push 被拒绝（非快进），需先手动 pull 解决冲突后再执行
